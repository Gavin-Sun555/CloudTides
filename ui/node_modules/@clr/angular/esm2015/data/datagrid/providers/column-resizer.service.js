import { __decorate } from "tslib";
/*
 * Copyright (c) 2016-2018 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { ElementRef, Injectable } from '@angular/core';
import { DomAdapter } from '../../../utils/dom-adapter/dom-adapter';
import { DatagridRenderOrganizer } from '../render/render-organizer';
import * as ɵngcc0 from '@angular/core';
const MIN_COLUMN_WIDTH = 96;
// This service allows DatagridHeaderRenderer and ClrDatagridColumnSeparator
// to share column resize data with each other.
let ColumnResizerService = class ColumnResizerService {
    constructor(el, domAdapter, organizer) {
        this.el = el;
        this.domAdapter = domAdapter;
        this.organizer = organizer;
        this._resizedBy = 0;
    }
    get resizedBy() {
        return this._resizedBy;
    }
    get minColumnWidth() {
        return this.domAdapter.minWidth(this.el.nativeElement) || MIN_COLUMN_WIDTH;
    }
    get maxResizeRange() {
        return this.widthBeforeResize - this.minColumnWidth;
    }
    startResize() {
        this._resizedBy = 0;
        this.isWithinMaxResizeRange = true;
        this.widthBeforeResize = this.domAdapter.clientRect(this.el.nativeElement).width;
    }
    endResize() {
        this.organizer.resize();
    }
    get widthAfterResize() {
        return this.widthBeforeResize + this._resizedBy;
    }
    calculateResize(event) {
        const moveX = event.dragPosition.moveX;
        // returns the resize amount within the allowed range
        if (moveX < -this.maxResizeRange) {
            this._resizedBy = -this.maxResizeRange;
            this.isWithinMaxResizeRange = false;
        }
        else {
            this._resizedBy = moveX;
            this.isWithinMaxResizeRange = true;
        }
    }
};
ColumnResizerService.ɵfac = function ColumnResizerService_Factory(t) { return new (t || ColumnResizerService)(ɵngcc0.ɵɵinject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinject(DomAdapter), ɵngcc0.ɵɵinject(DatagridRenderOrganizer)); };
ColumnResizerService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ColumnResizerService, factory: ColumnResizerService.ɵfac });
ColumnResizerService.ctorParameters = () => [
    { type: ElementRef },
    { type: DomAdapter },
    { type: DatagridRenderOrganizer }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ColumnResizerService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: DomAdapter }, { type: DatagridRenderOrganizer }]; }, null); })();
export { ColumnResizerService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sdW1uLXJlc2l6ZXIuc2VydmljZS5qcyIsInNvdXJjZXMiOlsibmc6L0BjbHIvYW5ndWxhci9kYXRhL2RhdGFncmlkL3Byb3ZpZGVycy9jb2x1bW4tcmVzaXplci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxPQUFPLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV2RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFFcEUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNEJBQTRCLENBQUM7O0FBRXJFLE1BQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBRTVCLDRFQUE0RTtBQUM1RSwrQ0FBK0M7QUFHL0MsSUFBYSxvQkFBb0IsR0FBakMsTUFBYSxvQkFBb0I7QUFDakMsSUFBRSxZQUFvQixFQUFjLEVBQVUsVUFBc0IsRUFBVSxTQUFrQztBQUFJLFFBQTlGLE9BQUUsR0FBRixFQUFFLENBQVk7QUFBQyxRQUFTLGVBQVUsR0FBVixVQUFVLENBQVk7QUFBQyxRQUFTLGNBQVMsR0FBVCxTQUFTLENBQXlCO0FBQUMsUUFJdkcsZUFBVSxHQUFXLENBQUMsQ0FBQztBQUNqQyxJQUxtSCxDQUFDO0FBQ3BILElBS0UsSUFBVyxTQUFTO0FBQ3RCLFFBQUksT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQzNCLElBQUUsQ0FBQztBQUNILElBSUUsSUFBVyxjQUFjO0FBQzNCLFFBQUksT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLGdCQUFnQixDQUFDO0FBQy9FLElBQUUsQ0FBQztBQUNILElBQ0UsSUFBVyxjQUFjO0FBQzNCLFFBQUksT0FBTyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztBQUN4RCxJQUFFLENBQUM7QUFDSCxJQUNTLFdBQVc7QUFBSyxRQUNyQixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUN4QixRQUFJLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUM7QUFDdkMsUUFBSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDckYsSUFBRSxDQUFDO0FBQ0gsSUFDUyxTQUFTO0FBQUssUUFDbkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUM1QixJQUFFLENBQUM7QUFDSCxJQUNFLElBQVcsZ0JBQWdCO0FBQUssUUFDOUIsT0FBTyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztBQUNwRCxJQUFFLENBQUM7QUFDSCxJQUNTLGVBQWUsQ0FBQyxLQUF3QjtBQUFJLFFBQ2pELE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDO0FBQzNDLFFBQUkscURBQXFEO0FBQ3pELFFBQUksSUFBSSxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFO0FBQ3RDLFlBQU0sSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUM7QUFDN0MsWUFBTSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDO0FBQzFDLFNBQUs7QUFBQyxhQUFLO0FBQ1gsWUFBTSxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztBQUM5QixZQUFNLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUM7QUFDekMsU0FBSztBQUNMLElBQUUsQ0FBQztBQUNILENBQUM7OzRIQUFBO0FBQ0Q7QUFBOEMsWUEvQ3BCLFVBQVU7QUFBSSxZQUFrQixVQUFVO0FBQUksWUFBaUIsdUJBQXVCO0FBQUc7QUFEdEcsb0JBQW9CLG9CQURoQyxVQUFVLEVBQUUsSUFDQSxvQkFBb0IsQ0ErQ2hDOztvSUFDRDtBQUFDLFNBaERZLG9CQUFvQjtBQUNoQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYtMjAxOCBWTXdhcmUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFRoaXMgc29mdHdhcmUgaXMgcmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UuXG4gKiBUaGUgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uIGNhbiBiZSBmb3VuZCBpbiBMSUNFTlNFIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHByb2plY3QuXG4gKi9cbmltcG9ydCB7IEVsZW1lbnRSZWYsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRG9tQWRhcHRlciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2RvbS1hZGFwdGVyL2RvbS1hZGFwdGVyJztcbmltcG9ydCB7IENsckRyYWdFdmVudCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2RyYWctYW5kLWRyb3AvZHJhZy1ldmVudCc7XG5pbXBvcnQgeyBEYXRhZ3JpZFJlbmRlck9yZ2FuaXplciB9IGZyb20gJy4uL3JlbmRlci9yZW5kZXItb3JnYW5pemVyJztcblxuY29uc3QgTUlOX0NPTFVNTl9XSURUSCA9IDk2O1xuXG4vLyBUaGlzIHNlcnZpY2UgYWxsb3dzIERhdGFncmlkSGVhZGVyUmVuZGVyZXIgYW5kIENsckRhdGFncmlkQ29sdW1uU2VwYXJhdG9yXG4vLyB0byBzaGFyZSBjb2x1bW4gcmVzaXplIGRhdGEgd2l0aCBlYWNoIG90aGVyLlxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQ29sdW1uUmVzaXplclNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsOiBFbGVtZW50UmVmLCBwcml2YXRlIGRvbUFkYXB0ZXI6IERvbUFkYXB0ZXIsIHByaXZhdGUgb3JnYW5pemVyOiBEYXRhZ3JpZFJlbmRlck9yZ2FuaXplcikge31cblxuICBwcml2YXRlIHdpZHRoQmVmb3JlUmVzaXplOiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfcmVzaXplZEJ5OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBnZXQgcmVzaXplZEJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9yZXNpemVkQnk7XG4gIH1cblxuICAvLyBpcyBpdCB3aXRoaW4gdGhlIG1heGltdW0gcmVzaXplIHJhbmdlIHRvIHRoZSBsZWZ0XG4gIHB1YmxpYyBpc1dpdGhpbk1heFJlc2l6ZVJhbmdlOiBib29sZWFuO1xuXG4gIHB1YmxpYyBnZXQgbWluQ29sdW1uV2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9tQWRhcHRlci5taW5XaWR0aCh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpIHx8IE1JTl9DT0xVTU5fV0lEVEg7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG1heFJlc2l6ZVJhbmdlKCkge1xuICAgIHJldHVybiB0aGlzLndpZHRoQmVmb3JlUmVzaXplIC0gdGhpcy5taW5Db2x1bW5XaWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydFJlc2l6ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXNpemVkQnkgPSAwO1xuICAgIHRoaXMuaXNXaXRoaW5NYXhSZXNpemVSYW5nZSA9IHRydWU7XG4gICAgdGhpcy53aWR0aEJlZm9yZVJlc2l6ZSA9IHRoaXMuZG9tQWRhcHRlci5jbGllbnRSZWN0KHRoaXMuZWwubmF0aXZlRWxlbWVudCkud2lkdGg7XG4gIH1cblxuICBwdWJsaWMgZW5kUmVzaXplKCk6IHZvaWQge1xuICAgIHRoaXMub3JnYW5pemVyLnJlc2l6ZSgpO1xuICB9XG5cbiAgcHVibGljIGdldCB3aWR0aEFmdGVyUmVzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMud2lkdGhCZWZvcmVSZXNpemUgKyB0aGlzLl9yZXNpemVkQnk7XG4gIH1cblxuICBwdWJsaWMgY2FsY3VsYXRlUmVzaXplKGV2ZW50OiBDbHJEcmFnRXZlbnQ8YW55Pik6IHZvaWQge1xuICAgIGNvbnN0IG1vdmVYID0gZXZlbnQuZHJhZ1Bvc2l0aW9uLm1vdmVYO1xuICAgIC8vIHJldHVybnMgdGhlIHJlc2l6ZSBhbW91bnQgd2l0aGluIHRoZSBhbGxvd2VkIHJhbmdlXG4gICAgaWYgKG1vdmVYIDwgLXRoaXMubWF4UmVzaXplUmFuZ2UpIHtcbiAgICAgIHRoaXMuX3Jlc2l6ZWRCeSA9IC10aGlzLm1heFJlc2l6ZVJhbmdlO1xuICAgICAgdGhpcy5pc1dpdGhpbk1heFJlc2l6ZVJhbmdlID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc2l6ZWRCeSA9IG1vdmVYO1xuICAgICAgdGhpcy5pc1dpdGhpbk1heFJlc2l6ZVJhbmdlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==