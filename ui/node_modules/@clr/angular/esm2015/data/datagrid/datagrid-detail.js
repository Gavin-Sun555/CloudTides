import { __decorate } from "tslib";
/*
 * Copyright (c) 2016-2020 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { Component, ContentChild, HostListener } from '@angular/core';
import { DetailService } from './providers/detail.service';
import { ClrCommonStringsService } from '../../utils/i18n/common-strings.service';
import { ClrDatagridDetailHeader } from './datagrid-detail-header';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '../../utils/focus-trap/focus-trap.directive';

const _c0 = function () { return { strict: false }; };
function ClrDatagridDetail_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵelementStart(1, "div", 2);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵprojection(3);
    ɵngcc0.ɵɵelementStart(4, "div", 2);
    ɵngcc0.ɵɵtext(5);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("clrFocusTrap", ɵngcc0.ɵɵpureFunction0(5, _c0))("id", ctx_r0.detailService.id);
    ɵngcc0.ɵɵattribute("aria-describedby", ctx_r0.header ? ctx_r0.header.titleId : "");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.commonStrings.keys.detailPaneStart);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.commonStrings.keys.detailPaneEnd);
} }
const _c1 = ["*"];
let ClrDatagridDetail = class ClrDatagridDetail {
    constructor(detailService, commonStrings) {
        this.detailService = detailService;
        this.commonStrings = commonStrings;
    }
    closeCheck() {
        this.detailService.close();
    }
};
ClrDatagridDetail.ɵfac = function ClrDatagridDetail_Factory(t) { return new (t || ClrDatagridDetail)(ɵngcc0.ɵɵdirectiveInject(DetailService), ɵngcc0.ɵɵdirectiveInject(ClrCommonStringsService)); };
ClrDatagridDetail.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ClrDatagridDetail, selectors: [["clr-dg-detail"]], contentQueries: function ClrDatagridDetail_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, ClrDatagridDetailHeader, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.header = _t.first);
    } }, hostVars: 2, hostBindings: function ClrDatagridDetail_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("keyup.esc", function ClrDatagridDetail_keyup_esc_HostBindingHandler() { return ctx.closeCheck(); }, false, ɵngcc0.ɵɵresolveDocument);
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("datagrid-detail-pane", true);
    } }, ngContentSelectors: _c1, decls: 1, vars: 1, consts: [["class", "datagrid-detail-pane-content", "role", "dialog", "aria-modal", "true", 3, "clrFocusTrap", "id", 4, "ngIf"], ["role", "dialog", "aria-modal", "true", 1, "datagrid-detail-pane-content", 3, "clrFocusTrap", "id"], [1, "clr-sr-only"]], template: function ClrDatagridDetail_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, ClrDatagridDetail_div_0_Template, 6, 6, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.detailService.isOpen);
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.FocusTrapDirective], encapsulation: 2 });
ClrDatagridDetail.ctorParameters = () => [
    { type: DetailService },
    { type: ClrCommonStringsService }
];
__decorate([
    ContentChild(ClrDatagridDetailHeader)
], ClrDatagridDetail.prototype, "header", void 0);
__decorate([
    HostListener('document:keyup.esc')
], ClrDatagridDetail.prototype, "closeCheck", null);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ClrDatagridDetail, [{
        type: Component,
        args: [{
                selector: 'clr-dg-detail',
                host: {
                    '[class.datagrid-detail-pane]': 'true'
                },
                // We put the *ngIf on the clrFocusTrap so it doesn't always exist on the page
                // have to test for presence of header for aria-describedby because it was causing unit tests to crash
                template: `
    <div [clrFocusTrap]="{strict: false}" class="datagrid-detail-pane-content" *ngIf="detailService.isOpen" role="dialog"
         [id]="detailService.id" aria-modal="true" [attr.aria-describedby]="header ? header.titleId : ''">
    <div class="clr-sr-only">{{commonStrings.keys.detailPaneStart}}</div>
      <ng-content></ng-content>
      <div class="clr-sr-only">{{commonStrings.keys.detailPaneEnd}}</div>
    </div>
    `
            }]
    }], function () { return [{ type: DetailService }, { type: ClrCommonStringsService }]; }, { closeCheck: [{
            type: HostListener,
            args: ['document:keyup.esc']
        }], header: [{
            type: ContentChild,
            args: [ClrDatagridDetailHeader]
        }] }); })();
export { ClrDatagridDetail };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWdyaWQtZGV0YWlsLmpzIiwic291cmNlcyI6WyJuZzovQGNsci9hbmd1bGFyL2RhdGEvZGF0YWdyaWQvZGF0YWdyaWQtZGV0YWlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWtCbkUsSUFBYSxpQkFBaUIsR0FBOUIsTUFBYSxpQkFBaUI7QUFDOUIsSUFFRSxZQUFtQixhQUE0QixFQUFTLGFBQXNDO0FBQUksUUFBL0Usa0JBQWEsR0FBYixhQUFhLENBQWU7QUFBQyxRQUFRLGtCQUFhLEdBQWIsYUFBYSxDQUF5QjtBQUFDLElBQUUsQ0FBQztBQUNwRyxJQUVFLFVBQVU7QUFBSyxRQUNiLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDL0IsSUFBRSxDQUFDO0FBQ0gsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OzttRkFBQTtBQUNEO0FBQTJDLFlBUFAsYUFBYTtBQUFJLFlBQW9CLHVCQUF1QjtBQUFHO0FBRjFEO0FBQWEsSUFBbkQsWUFBWSxDQUFDLHVCQUF1QixDQUFDO0FBQUMsaURBQXVDO0FBSzlFO0FBQWEsSUFEWixZQUFZLENBQUMsb0JBQW9CLENBQUM7QUFDckMsbURBRUc7QUFSVSxpQkFBaUIsb0JBaEI3QixTQUFTLENBQUMsVUFDVCxRQUFRLEVBQUU7TUFBZSxVQUN6QixJQUFJLEVBQUU7V0FDSjt3QkFBOEIsRUFBRSxNQUFNO0FBQ3ZDLFVBQ0Q7O0tBQThFLFNBQzlFOztFQUFzRyxTQUN0RyxRQUFRLEVBQUU7Ozs7d0VBT1A7SUFDSixDQUFDLElBQ1csaUJBQWlCLENBUzdCOzs7Ozs7Ozs7OztvQkFDRDtBQUFDLFNBVlksaUJBQWlCO0FBQzdCIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxNi0yMDIwIFZNd2FyZSwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogVGhpcyBzb2Z0d2FyZSBpcyByZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZS5cbiAqIFRoZSBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24gY2FuIGJlIGZvdW5kIGluIExJQ0VOU0UgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgcHJvamVjdC5cbiAqL1xuaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRGV0YWlsU2VydmljZSB9IGZyb20gJy4vcHJvdmlkZXJzL2RldGFpbC5zZXJ2aWNlJztcbmltcG9ydCB7IENsckNvbW1vblN0cmluZ3NTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vdXRpbHMvaTE4bi9jb21tb24tc3RyaW5ncy5zZXJ2aWNlJztcbmltcG9ydCB7IENsckRhdGFncmlkRGV0YWlsSGVhZGVyIH0gZnJvbSAnLi9kYXRhZ3JpZC1kZXRhaWwtaGVhZGVyJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY2xyLWRnLWRldGFpbCcsXG4gIGhvc3Q6IHtcbiAgICAnW2NsYXNzLmRhdGFncmlkLWRldGFpbC1wYW5lXSc6ICd0cnVlJyxcbiAgfSxcbiAgLy8gV2UgcHV0IHRoZSAqbmdJZiBvbiB0aGUgY2xyRm9jdXNUcmFwIHNvIGl0IGRvZXNuJ3QgYWx3YXlzIGV4aXN0IG9uIHRoZSBwYWdlXG4gIC8vIGhhdmUgdG8gdGVzdCBmb3IgcHJlc2VuY2Ugb2YgaGVhZGVyIGZvciBhcmlhLWRlc2NyaWJlZGJ5IGJlY2F1c2UgaXQgd2FzIGNhdXNpbmcgdW5pdCB0ZXN0cyB0byBjcmFzaFxuICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgW2NsckZvY3VzVHJhcF09XCJ7c3RyaWN0OiBmYWxzZX1cIiBjbGFzcz1cImRhdGFncmlkLWRldGFpbC1wYW5lLWNvbnRlbnRcIiAqbmdJZj1cImRldGFpbFNlcnZpY2UuaXNPcGVuXCIgcm9sZT1cImRpYWxvZ1wiXG4gICAgICAgICBbaWRdPVwiZGV0YWlsU2VydmljZS5pZFwiIGFyaWEtbW9kYWw9XCJ0cnVlXCIgW2F0dHIuYXJpYS1kZXNjcmliZWRieV09XCJoZWFkZXIgPyBoZWFkZXIudGl0bGVJZCA6ICcnXCI+XG4gICAgPGRpdiBjbGFzcz1cImNsci1zci1vbmx5XCI+e3tjb21tb25TdHJpbmdzLmtleXMuZGV0YWlsUGFuZVN0YXJ0fX08L2Rpdj5cbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDxkaXYgY2xhc3M9XCJjbHItc3Itb25seVwiPnt7Y29tbW9uU3RyaW5ncy5rZXlzLmRldGFpbFBhbmVFbmR9fTwvZGl2PlxuICAgIDwvZGl2PlxuICAgIGAsXG59KVxuZXhwb3J0IGNsYXNzIENsckRhdGFncmlkRGV0YWlsIHtcbiAgQENvbnRlbnRDaGlsZChDbHJEYXRhZ3JpZERldGFpbEhlYWRlcikgcHVibGljIGhlYWRlcjogQ2xyRGF0YWdyaWREZXRhaWxIZWFkZXI7XG5cbiAgY29uc3RydWN0b3IocHVibGljIGRldGFpbFNlcnZpY2U6IERldGFpbFNlcnZpY2UsIHB1YmxpYyBjb21tb25TdHJpbmdzOiBDbHJDb21tb25TdHJpbmdzU2VydmljZSkge31cblxuICBASG9zdExpc3RlbmVyKCdkb2N1bWVudDprZXl1cC5lc2MnKVxuICBjbG9zZUNoZWNrKCk6IHZvaWQge1xuICAgIHRoaXMuZGV0YWlsU2VydmljZS5jbG9zZSgpO1xuICB9XG59XG4iXX0=