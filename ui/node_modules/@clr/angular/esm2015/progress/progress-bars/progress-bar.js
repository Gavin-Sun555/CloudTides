import { __decorate } from "tslib";
/*
 * Copyright (c) 2016-2020 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { Component, Input, HostBinding } from '@angular/core';
import { isBooleanAttributeSet } from '../../utils/component/is-boolean-attribute-set';
import { ClrAriaLiveService, ClrAriaLivePoliteness } from '../../utils/a11y/aria-live.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function ClrProgressBar_span_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.displayValue);
} }
let ClrProgressBar = class ClrProgressBar {
    constructor(ariaLiveService) {
        this.ariaLiveService = ariaLiveService;
        this.externalId = '';
        // Progress
        this.max = 100;
        this._value = 0;
    }
    set id(value) {
        this._ID = value;
        this.externalId = null;
    }
    get id() {
        return this._ID;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        this._value = value;
        if (this.displayAriaLive()) {
            this.ariaLiveService.announce(this.displayValue, this.ariaLive);
        }
    }
    // Styles
    get progressClass() {
        return true;
    }
    get labeledClass() {
        return this._labeled;
    }
    set clrLabeled(value) {
        this._labeled = isBooleanAttributeSet(value);
    }
    get fadeClass() {
        return this._fade;
    }
    set clrFade(value) {
        this._fade = isBooleanAttributeSet(value);
    }
    get loopClass() {
        return this._loop;
    }
    set clrLoop(value) {
        this._loop = isBooleanAttributeSet(value);
    }
    get successClass() {
        return this._success;
    }
    /** @deprecated since 2.0, remove in 4.0 */
    set clrSuccess(value) {
        this._success = isBooleanAttributeSet(value);
    }
    get dangerClass() {
        return this._danger;
    }
    /** @deprecated since 2.0, remove in 4.0 */
    set clrDanger(value) {
        this._danger = isBooleanAttributeSet(value);
    }
    get flashClass() {
        return this._flash;
    }
    set clrFlash(value) {
        this._flash = isBooleanAttributeSet(value);
    }
    get flashDangerClass() {
        return this._flashDanger;
    }
    /** @deprecated since 2.0, remove in 4.0 */
    set clrFlashDanger(value) {
        this._flashDanger = isBooleanAttributeSet(value);
    }
    /**
     * Make sure that we always will have something that is readable
     * for the screen reader
     */
    get displayValue() {
        if (this.displayval) {
            return this.displayval;
        }
        return `${this.value}%`;
    }
    /**
     * Display aria-live only when there is value and it's not 0 or equal to the max value
     */
    displayAriaLive() {
        return (this.value !== undefined || this.value !== 0) && this.value !== this.max;
    }
    get ariaLive() {
        if (isBooleanAttributeSet(this.assertive)) {
            return ClrAriaLivePoliteness.assertive;
        }
        if (isBooleanAttributeSet(this.off)) {
            return ClrAriaLivePoliteness.off;
        }
        return ClrAriaLivePoliteness.polite;
    }
};
ClrProgressBar.ɵfac = function ClrProgressBar_Factory(t) { return new (t || ClrProgressBar)(ɵngcc0.ɵɵdirectiveInject(ClrAriaLiveService)); };
ClrProgressBar.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ClrProgressBar, selectors: [["clr-progress-bar"]], hostVars: 17, hostBindings: function ClrProgressBar_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵattribute("id", ctx.externalId);
        ɵngcc0.ɵɵclassProp("progress", ctx.progressClass)("labeled", ctx.labeledClass)("progress-fade", ctx.fadeClass)("loop", ctx.loopClass)("success", ctx.successClass)("danger", ctx.dangerClass)("flash", ctx.flashClass)("flash-danger", ctx.flashDangerClass);
    } }, inputs: { max: ["clrMax", "max"], id: "id", value: ["clrValue", "value"], clrLabeled: "clrLabeled", clrFade: "clrFade", clrLoop: "clrLoop", clrSuccess: "clrSuccess", clrDanger: "clrDanger", clrFlash: "clrFlash", clrFlashDanger: "clrFlashDanger", displayval: ["clrDisplayval", "displayval"], assertive: ["clrAssertive", "assertive"], off: ["clrOff", "off"] }, features: [ɵngcc0.ɵɵProvidersFeature([ClrAriaLiveService])], decls: 2, vars: 5, consts: [[3, "id"], [4, "ngIf"]], template: function ClrProgressBar_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "progress", 0);
        ɵngcc0.ɵɵtemplate(1, ClrProgressBar_span_1_Template, 2, 1, "span", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id);
        ɵngcc0.ɵɵattribute("max", ctx.max)("value", ctx.value)("data-displayval", ctx.displayValue);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.displayAriaLive());
    } }, directives: [ɵngcc1.NgIf], encapsulation: 2 });
ClrProgressBar.ctorParameters = () => [
    { type: ClrAriaLiveService }
];
__decorate([
    HostBinding('attr.id')
], ClrProgressBar.prototype, "externalId", void 0);
__decorate([
    Input()
], ClrProgressBar.prototype, "id", null);
__decorate([
    Input('clrMax')
], ClrProgressBar.prototype, "max", void 0);
__decorate([
    Input('clrDisplayval')
], ClrProgressBar.prototype, "displayval", void 0);
__decorate([
    Input('clrValue')
], ClrProgressBar.prototype, "value", null);
__decorate([
    HostBinding('class.progress')
], ClrProgressBar.prototype, "progressClass", null);
__decorate([
    HostBinding('class.labeled')
], ClrProgressBar.prototype, "labeledClass", null);
__decorate([
    Input('clrLabeled')
], ClrProgressBar.prototype, "clrLabeled", null);
__decorate([
    HostBinding('class.progress-fade')
], ClrProgressBar.prototype, "fadeClass", null);
__decorate([
    Input('clrFade')
], ClrProgressBar.prototype, "clrFade", null);
__decorate([
    HostBinding('class.loop')
], ClrProgressBar.prototype, "loopClass", null);
__decorate([
    Input('clrLoop')
], ClrProgressBar.prototype, "clrLoop", null);
__decorate([
    HostBinding('class.success')
], ClrProgressBar.prototype, "successClass", null);
__decorate([
    Input('clrSuccess')
], ClrProgressBar.prototype, "clrSuccess", null);
__decorate([
    HostBinding('class.danger')
], ClrProgressBar.prototype, "dangerClass", null);
__decorate([
    Input('clrDanger')
], ClrProgressBar.prototype, "clrDanger", null);
__decorate([
    HostBinding('class.flash')
], ClrProgressBar.prototype, "flashClass", null);
__decorate([
    Input('clrFlash')
], ClrProgressBar.prototype, "clrFlash", null);
__decorate([
    HostBinding('class.flash-danger')
], ClrProgressBar.prototype, "flashDangerClass", null);
__decorate([
    Input('clrFlashDanger')
], ClrProgressBar.prototype, "clrFlashDanger", null);
__decorate([
    Input('clrAssertive')
], ClrProgressBar.prototype, "assertive", void 0);
__decorate([
    Input('clrOff')
], ClrProgressBar.prototype, "off", void 0);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ClrProgressBar, [{
        type: Component,
        args: [{
                providers: [ClrAriaLiveService],
                selector: 'clr-progress-bar',
                template: `
    <progress [id]="id" [attr.max]="max" [attr.value]="value" [attr.data-displayval]="displayValue"></progress>
    <span *ngIf="displayAriaLive()">{{ displayValue }}</span>
  `
            }]
    }], function () { return [{ type: ClrAriaLiveService }]; }, { externalId: [{
            type: HostBinding,
            args: ['attr.id']
        }], max: [{
            type: Input,
            args: ['clrMax']
        }], id: [{
            type: Input
        }], value: [{
            type: Input,
            args: ['clrValue']
        }], progressClass: [{
            type: HostBinding,
            args: ['class.progress']
        }], labeledClass: [{
            type: HostBinding,
            args: ['class.labeled']
        }], clrLabeled: [{
            type: Input,
            args: ['clrLabeled']
        }], fadeClass: [{
            type: HostBinding,
            args: ['class.progress-fade']
        }], clrFade: [{
            type: Input,
            args: ['clrFade']
        }], loopClass: [{
            type: HostBinding,
            args: ['class.loop']
        }], clrLoop: [{
            type: Input,
            args: ['clrLoop']
        }], successClass: [{
            type: HostBinding,
            args: ['class.success']
        }], clrSuccess: [{
            type: Input,
            args: ['clrSuccess']
        }], dangerClass: [{
            type: HostBinding,
            args: ['class.danger']
        }], clrDanger: [{
            type: Input,
            args: ['clrDanger']
        }], flashClass: [{
            type: HostBinding,
            args: ['class.flash']
        }], clrFlash: [{
            type: Input,
            args: ['clrFlash']
        }], flashDangerClass: [{
            type: HostBinding,
            args: ['class.flash-danger']
        }], clrFlashDanger: [{
            type: Input,
            args: ['clrFlashDanger']
        }], displayval: [{
            type: Input,
            args: ['clrDisplayval']
        }], assertive: [{
            type: Input,
            args: ['clrAssertive']
        }], off: [{
            type: Input,
            args: ['clrOff']
        }] }); })();
export { ClrProgressBar };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtYmFyLmpzIiwic291cmNlcyI6WyJuZzovQGNsci9hbmd1bGFyL3Byb2dyZXNzL3Byb2dyZXNzLWJhcnMvcHJvZ3Jlc3MtYmFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDdkYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7Ozs7Ozs7Ozs7Ozs7QUFVL0YsSUFBYSxjQUFjLEdBQTNCLE1BQWEsY0FBYztBQUMzQixJQUFFLFlBQW9CLGVBQW1DO0FBQUksUUFBdkMsb0JBQWUsR0FBZixlQUFlLENBQW9CO0FBQUMsUUFNaEMsZUFBVSxHQUFXLEVBQUUsQ0FBQztBQUNsRCxRQVNFLFdBQVc7QUFDYixRQUFtQixRQUFHLEdBQVcsR0FBRyxDQUFDO0FBQ3JDLFFBRVUsV0FBTSxHQUFXLENBQUMsQ0FBQztBQUM3QixJQXJCNEQsQ0FBQztBQUM3RCxJQU9FLElBQUksRUFBRSxDQUFDLEtBQWE7QUFDdEIsUUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQztBQUNyQixRQUFJLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzNCLElBQUUsQ0FBQztBQUNILElBQUUsSUFBSSxFQUFFO0FBQ1IsUUFBSSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7QUFDcEIsSUFBRSxDQUFDO0FBQ0gsSUFPRSxJQUFJLEtBQUs7QUFDWCxRQUFJLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUN2QixJQUFFLENBQUM7QUFDSCxJQUNFLElBQUksS0FBSyxDQUFDLEtBQUs7QUFDakIsUUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztBQUN4QixR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QUFhLElBRFosV0FBVyxDQUFDLFlBQVksQ0FBQztBQUM1QiwrQ0FFRztBQUdEO0FBQWEsSUFEWixLQUFLLENBQUMsU0FBUyxDQUFDO0FBQ25CLDZDQUVHO0FBSUQ7QUFBYSxJQURaLFdBQVcsQ0FBQyxlQUFlLENBQUM7QUFDL0Isa0RBRUc7QUFJRDtBQUFhLElBRFosS0FBSyxDQUFDLFlBQVksQ0FBQztBQUN0QixnREFFRztBQUlEO0FBQWEsSUFEWixXQUFXLENBQUMsY0FBYyxDQUFDO0FBQzlCLGlEQUVHO0FBSUQ7QUFBYSxJQURaLEtBQUssQ0FBQyxXQUFXLENBQUM7QUFDckIsK0NBRUc7QUFJRDtBQUFhLElBRFosV0FBVyxDQUFDLGFBQWEsQ0FBQztBQUM3QixnREFFRztBQUdEO0FBQWEsSUFEWixLQUFLLENBQUMsVUFBVSxDQUFDO0FBQ3BCLDhDQUVHO0FBSUQ7QUFBYSxJQURaLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNwQyxzREFFRztBQUlEO0FBQWEsSUFEWixLQUFLLENBQUMsZ0JBQWdCLENBQUM7QUFDMUIsb0RBRUc7QUFJc0I7QUFBYSxJQUFuQyxLQUFLLENBQUMsY0FBYyxDQUFDO0FBQUMsaURBQW1CO0FBRXpCO0FBQWEsSUFBN0IsS0FBSyxDQUFDLFFBQVEsQ0FBQztBQUFDLDJDQUFhO0FBNUhuQixjQUFjLG9CQVIxQixTQUFTLENBQUMsVUFDVCxTQUFTLEVBQUUsQ0FBQztXQUFrQixDQUFDLFVBQy9CO0tBQVEsRUFBRTtRQUFrQixVQUM1QixRQUFRLEVBQUU7OztvRkFHVCxNQUNGLENBQUMsSUFDVyxjQUFjLENBeUoxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUNEO0FBQUMsU0ExSlksY0FBYztBQUMxQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYtMjAyMCBWTXdhcmUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFRoaXMgc29mdHdhcmUgaXMgcmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UuXG4gKiBUaGUgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uIGNhbiBiZSBmb3VuZCBpbiBMSUNFTlNFIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHByb2plY3QuXG4gKi9cbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQgfSBmcm9tICcuLi8uLi91dGlscy9jb21wb25lbnQvaXMtYm9vbGVhbi1hdHRyaWJ1dGUtc2V0JztcbmltcG9ydCB7IENsckFyaWFMaXZlU2VydmljZSwgQ2xyQXJpYUxpdmVQb2xpdGVuZXNzIH0gZnJvbSAnLi4vLi4vdXRpbHMvYTExeS9hcmlhLWxpdmUuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBwcm92aWRlcnM6IFtDbHJBcmlhTGl2ZVNlcnZpY2VdLFxuICBzZWxlY3RvcjogJ2Nsci1wcm9ncmVzcy1iYXInLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxwcm9ncmVzcyBbaWRdPVwiaWRcIiBbYXR0ci5tYXhdPVwibWF4XCIgW2F0dHIudmFsdWVdPVwidmFsdWVcIiBbYXR0ci5kYXRhLWRpc3BsYXl2YWxdPVwiZGlzcGxheVZhbHVlXCI+PC9wcm9ncmVzcz5cbiAgICA8c3BhbiAqbmdJZj1cImRpc3BsYXlBcmlhTGl2ZSgpXCI+e3sgZGlzcGxheVZhbHVlIH19PC9zcGFuPlxuICBgLFxufSlcbmV4cG9ydCBjbGFzcyBDbHJQcm9ncmVzc0JhciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXJpYUxpdmVTZXJ2aWNlOiBDbHJBcmlhTGl2ZVNlcnZpY2UpIHt9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb21wb25lbnQgSURcbiAgICovXG4gIHByaXZhdGUgX0lEOiBzdHJpbmc7XG4gIEBIb3N0QmluZGluZygnYXR0ci5pZCcpIGV4dGVybmFsSWQ6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKVxuICBzZXQgaWQodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX0lEID0gdmFsdWU7XG4gICAgdGhpcy5leHRlcm5hbElkID0gbnVsbDtcbiAgfVxuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX0lEO1xuICB9XG5cbiAgLy8gUHJvZ3Jlc3NcbiAgQElucHV0KCdjbHJNYXgnKSBtYXg6IG51bWJlciA9IDEwMDtcbiAgQElucHV0KCdjbHJEaXNwbGF5dmFsJykgZGlzcGxheXZhbDogc3RyaW5nO1xuXG4gIHByaXZhdGUgX3ZhbHVlOiBudW1iZXIgPSAwO1xuICBASW5wdXQoJ2NsclZhbHVlJylcbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIHNldCB2YWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuZGlzcGxheUFyaWFMaXZlKCkpIHtcbiAgICAgIHRoaXMuYXJpYUxpdmVTZXJ2aWNlLmFubm91bmNlKHRoaXMuZGlzcGxheVZhbHVlLCB0aGlzLmFyaWFMaXZlKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdHlsZXNcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5wcm9ncmVzcycpXG4gIGdldCBwcm9ncmVzc0NsYXNzKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfbGFiZWxlZDogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5sYWJlbGVkJylcbiAgZ2V0IGxhYmVsZWRDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fbGFiZWxlZDtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyTGFiZWxlZCcpXG4gIHNldCBjbHJMYWJlbGVkKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fbGFiZWxlZCA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9mYWRlOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnByb2dyZXNzLWZhZGUnKVxuICBnZXQgZmFkZUNsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9mYWRlO1xuICB9XG5cbiAgQElucHV0KCdjbHJGYWRlJylcbiAgc2V0IGNsckZhZGUodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9mYWRlID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2xvb3A6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MubG9vcCcpXG4gIGdldCBsb29wQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvb3A7XG4gIH1cblxuICBASW5wdXQoJ2Nsckxvb3AnKVxuICBzZXQgY2xyTG9vcCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2xvb3AgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3VjY2VzczogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zdWNjZXNzJylcbiAgZ2V0IHN1Y2Nlc3NDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fc3VjY2VzcztcbiAgfVxuXG4gIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSAyLjAsIHJlbW92ZSBpbiA0LjAgKi9cbiAgQElucHV0KCdjbHJTdWNjZXNzJylcbiAgc2V0IGNsclN1Y2Nlc3ModmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9zdWNjZXNzID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2RhbmdlcjogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5kYW5nZXInKVxuICBnZXQgZGFuZ2VyQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhbmdlcjtcbiAgfVxuXG4gIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSAyLjAsIHJlbW92ZSBpbiA0LjAgKi9cbiAgQElucHV0KCdjbHJEYW5nZXInKVxuICBzZXQgY2xyRGFuZ2VyKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fZGFuZ2VyID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZsYXNoOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZsYXNoJylcbiAgZ2V0IGZsYXNoQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZsYXNoO1xuICB9XG5cbiAgQElucHV0KCdjbHJGbGFzaCcpXG4gIHNldCBjbHJGbGFzaCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2ZsYXNoID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZsYXNoRGFuZ2VyOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZsYXNoLWRhbmdlcicpXG4gIGdldCBmbGFzaERhbmdlckNsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9mbGFzaERhbmdlcjtcbiAgfVxuXG4gIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSAyLjAsIHJlbW92ZSBpbiA0LjAgKi9cbiAgQElucHV0KCdjbHJGbGFzaERhbmdlcicpXG4gIHNldCBjbHJGbGFzaERhbmdlcih2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2ZsYXNoRGFuZ2VyID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIC8vIEFyaWEgTGl2ZVxuICAvKiogQGRlcHJlY2F0ZWQgc2luY2UgMy4wLCByZW1vdmUgaW4gNC4wICovXG4gIEBJbnB1dCgnY2xyQXNzZXJ0aXZlJykgYXNzZXJ0aXZlOiBib29sZWFuO1xuICAvKiogQGRlcHJlY2F0ZWQgc2luY2UgMy4wLCByZW1vdmUgaW4gNC4wICovXG4gIEBJbnB1dCgnY2xyT2ZmJykgb2ZmOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBNYWtlIHN1cmUgdGhhdCB3ZSBhbHdheXMgd2lsbCBoYXZlIHNvbWV0aGluZyB0aGF0IGlzIHJlYWRhYmxlXG4gICAqIGZvciB0aGUgc2NyZWVuIHJlYWRlclxuICAgKi9cbiAgZ2V0IGRpc3BsYXlWYWx1ZSgpIHtcbiAgICBpZiAodGhpcy5kaXNwbGF5dmFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXNwbGF5dmFsO1xuICAgIH1cbiAgICByZXR1cm4gYCR7dGhpcy52YWx1ZX0lYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IGFyaWEtbGl2ZSBvbmx5IHdoZW4gdGhlcmUgaXMgdmFsdWUgYW5kIGl0J3Mgbm90IDAgb3IgZXF1YWwgdG8gdGhlIG1heCB2YWx1ZVxuICAgKi9cbiAgZGlzcGxheUFyaWFMaXZlKCkge1xuICAgIHJldHVybiAodGhpcy52YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IHRoaXMudmFsdWUgIT09IDApICYmIHRoaXMudmFsdWUgIT09IHRoaXMubWF4O1xuICB9XG5cbiAgZ2V0IGFyaWFMaXZlKCk6IENsckFyaWFMaXZlUG9saXRlbmVzcyB7XG4gICAgaWYgKGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh0aGlzLmFzc2VydGl2ZSkpIHtcbiAgICAgIHJldHVybiBDbHJBcmlhTGl2ZVBvbGl0ZW5lc3MuYXNzZXJ0aXZlO1xuICAgIH1cbiAgICBpZiAoaXNCb29sZWFuQXR0cmlidXRlU2V0KHRoaXMub2ZmKSkge1xuICAgICAgcmV0dXJuIENsckFyaWFMaXZlUG9saXRlbmVzcy5vZmY7XG4gICAgfVxuICAgIHJldHVybiBDbHJBcmlhTGl2ZVBvbGl0ZW5lc3MucG9saXRlO1xuICB9XG59XG4iXX0=