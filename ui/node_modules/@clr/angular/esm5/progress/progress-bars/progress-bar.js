import { __decorate } from "tslib";
/*
 * Copyright (c) 2016-2020 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { Component, Input, HostBinding } from '@angular/core';
import { isBooleanAttributeSet } from '../../utils/component/is-boolean-attribute-set';
import { ClrAriaLiveService, ClrAriaLivePoliteness } from '../../utils/a11y/aria-live.service';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function ClrProgressBar_span_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span");
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.displayValue);
} }
var ClrProgressBar = /** @class */ (function () {
    function ClrProgressBar(ariaLiveService) {
        this.ariaLiveService = ariaLiveService;
        this.externalId = '';
        // Progress
        this.max = 100;
        this._value = 0;
    }
    Object.defineProperty(ClrProgressBar.prototype, "id", {
        get: function () {
            return this._ID;
        },
        set: function (value) {
            this._ID = value;
            this.externalId = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (value) {
            this._value = value;
            if (this.displayAriaLive()) {
                this.ariaLiveService.announce(this.displayValue, this.ariaLive);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "progressClass", {
        // Styles
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "labeledClass", {
        get: function () {
            return this._labeled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrLabeled", {
        set: function (value) {
            this._labeled = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "fadeClass", {
        get: function () {
            return this._fade;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrFade", {
        set: function (value) {
            this._fade = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "loopClass", {
        get: function () {
            return this._loop;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrLoop", {
        set: function (value) {
            this._loop = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "successClass", {
        get: function () {
            return this._success;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrSuccess", {
        /** @deprecated since 2.0, remove in 4.0 */
        set: function (value) {
            this._success = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "dangerClass", {
        get: function () {
            return this._danger;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrDanger", {
        /** @deprecated since 2.0, remove in 4.0 */
        set: function (value) {
            this._danger = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "flashClass", {
        get: function () {
            return this._flash;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrFlash", {
        set: function (value) {
            this._flash = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "flashDangerClass", {
        get: function () {
            return this._flashDanger;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrFlashDanger", {
        /** @deprecated since 2.0, remove in 4.0 */
        set: function (value) {
            this._flashDanger = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "displayValue", {
        /**
         * Make sure that we always will have something that is readable
         * for the screen reader
         */
        get: function () {
            if (this.displayval) {
                return this.displayval;
            }
            return this.value + "%";
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Display aria-live only when there is value and it's not 0 or equal to the max value
     */
    ClrProgressBar.prototype.displayAriaLive = function () {
        return (this.value !== undefined || this.value !== 0) && this.value !== this.max;
    };
    Object.defineProperty(ClrProgressBar.prototype, "ariaLive", {
        get: function () {
            if (isBooleanAttributeSet(this.assertive)) {
                return ClrAriaLivePoliteness.assertive;
            }
            if (isBooleanAttributeSet(this.off)) {
                return ClrAriaLivePoliteness.off;
            }
            return ClrAriaLivePoliteness.polite;
        },
        enumerable: true,
        configurable: true
    });
    ClrProgressBar.ctorParameters = function () { return [
        { type: ClrAriaLiveService }
    ]; };
    __decorate([
        HostBinding('attr.id')
    ], ClrProgressBar.prototype, "externalId", void 0);
    __decorate([
        Input()
    ], ClrProgressBar.prototype, "id", null);
    __decorate([
        Input('clrMax')
    ], ClrProgressBar.prototype, "max", void 0);
    __decorate([
        Input('clrDisplayval')
    ], ClrProgressBar.prototype, "displayval", void 0);
    __decorate([
        Input('clrValue')
    ], ClrProgressBar.prototype, "value", null);
    __decorate([
        HostBinding('class.progress')
    ], ClrProgressBar.prototype, "progressClass", null);
    __decorate([
        HostBinding('class.labeled')
    ], ClrProgressBar.prototype, "labeledClass", null);
    __decorate([
        Input('clrLabeled')
    ], ClrProgressBar.prototype, "clrLabeled", null);
    __decorate([
        HostBinding('class.progress-fade')
    ], ClrProgressBar.prototype, "fadeClass", null);
    __decorate([
        Input('clrFade')
    ], ClrProgressBar.prototype, "clrFade", null);
    __decorate([
        HostBinding('class.loop')
    ], ClrProgressBar.prototype, "loopClass", null);
    __decorate([
        Input('clrLoop')
    ], ClrProgressBar.prototype, "clrLoop", null);
    __decorate([
        HostBinding('class.success')
    ], ClrProgressBar.prototype, "successClass", null);
    __decorate([
        Input('clrSuccess')
    ], ClrProgressBar.prototype, "clrSuccess", null);
    __decorate([
        HostBinding('class.danger')
    ], ClrProgressBar.prototype, "dangerClass", null);
    __decorate([
        Input('clrDanger')
    ], ClrProgressBar.prototype, "clrDanger", null);
    __decorate([
        HostBinding('class.flash')
    ], ClrProgressBar.prototype, "flashClass", null);
    __decorate([
        Input('clrFlash')
    ], ClrProgressBar.prototype, "clrFlash", null);
    __decorate([
        HostBinding('class.flash-danger')
    ], ClrProgressBar.prototype, "flashDangerClass", null);
    __decorate([
        Input('clrFlashDanger')
    ], ClrProgressBar.prototype, "clrFlashDanger", null);
    __decorate([
        Input('clrAssertive')
    ], ClrProgressBar.prototype, "assertive", void 0);
    __decorate([
        Input('clrOff')
    ], ClrProgressBar.prototype, "off", void 0);
ClrProgressBar.ɵfac = function ClrProgressBar_Factory(t) { return new (t || ClrProgressBar)(ɵngcc0.ɵɵdirectiveInject(ClrAriaLiveService)); };
ClrProgressBar.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ClrProgressBar, selectors: [["clr-progress-bar"]], hostVars: 17, hostBindings: function ClrProgressBar_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵattribute("id", ctx.externalId);
        ɵngcc0.ɵɵclassProp("progress", ctx.progressClass)("labeled", ctx.labeledClass)("progress-fade", ctx.fadeClass)("loop", ctx.loopClass)("success", ctx.successClass)("danger", ctx.dangerClass)("flash", ctx.flashClass)("flash-danger", ctx.flashDangerClass);
    } }, inputs: { max: ["clrMax", "max"], id: "id", value: ["clrValue", "value"], clrLabeled: "clrLabeled", clrFade: "clrFade", clrLoop: "clrLoop", clrSuccess: "clrSuccess", clrDanger: "clrDanger", clrFlash: "clrFlash", clrFlashDanger: "clrFlashDanger", displayval: ["clrDisplayval", "displayval"], assertive: ["clrAssertive", "assertive"], off: ["clrOff", "off"] }, features: [ɵngcc0.ɵɵProvidersFeature([ClrAriaLiveService])], decls: 2, vars: 5, consts: [[3, "id"], [4, "ngIf"]], template: function ClrProgressBar_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelement(0, "progress", 0);
        ɵngcc0.ɵɵtemplate(1, ClrProgressBar_span_1_Template, 2, 1, "span", 1);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id);
        ɵngcc0.ɵɵattribute("max", ctx.max)("value", ctx.value)("data-displayval", ctx.displayValue);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.displayAriaLive());
    } }, directives: [ɵngcc1.NgIf], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ClrProgressBar, [{
        type: Component,
        args: [{
                providers: [ClrAriaLiveService],
                selector: 'clr-progress-bar',
                template: "\n    <progress [id]=\"id\" [attr.max]=\"max\" [attr.value]=\"value\" [attr.data-displayval]=\"displayValue\"></progress>\n    <span *ngIf=\"displayAriaLive()\">{{ displayValue }}</span>\n  "
            }]
    }], function () { return [{ type: ClrAriaLiveService }]; }, { externalId: [{
            type: HostBinding,
            args: ['attr.id']
        }], max: [{
            type: Input,
            args: ['clrMax']
        }], id: [{
            type: Input
        }], value: [{
            type: Input,
            args: ['clrValue']
        }], progressClass: [{
            type: HostBinding,
            args: ['class.progress']
        }], labeledClass: [{
            type: HostBinding,
            args: ['class.labeled']
        }], clrLabeled: [{
            type: Input,
            args: ['clrLabeled']
        }], fadeClass: [{
            type: HostBinding,
            args: ['class.progress-fade']
        }], clrFade: [{
            type: Input,
            args: ['clrFade']
        }], loopClass: [{
            type: HostBinding,
            args: ['class.loop']
        }], clrLoop: [{
            type: Input,
            args: ['clrLoop']
        }], successClass: [{
            type: HostBinding,
            args: ['class.success']
        }], clrSuccess: [{
            type: Input,
            args: ['clrSuccess']
        }], dangerClass: [{
            type: HostBinding,
            args: ['class.danger']
        }], clrDanger: [{
            type: Input,
            args: ['clrDanger']
        }], flashClass: [{
            type: HostBinding,
            args: ['class.flash']
        }], clrFlash: [{
            type: Input,
            args: ['clrFlash']
        }], flashDangerClass: [{
            type: HostBinding,
            args: ['class.flash-danger']
        }], clrFlashDanger: [{
            type: Input,
            args: ['clrFlashDanger']
        }], displayval: [{
            type: Input,
            args: ['clrDisplayval']
        }], assertive: [{
            type: Input,
            args: ['clrAssertive']
        }], off: [{
            type: Input,
            args: ['clrOff']
        }] }); })();
    return ClrProgressBar;
}());
export { ClrProgressBar };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtYmFyLmpzIiwic291cmNlcyI6WyJuZzovQGNsci9hbmd1bGFyL3Byb2dyZXNzL3Byb2dyZXNzLWJhcnMvcHJvZ3Jlc3MtYmFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDdkYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7Ozs7Ozs7Ozs7Ozs7QUFVL0Y7QUFDb0IsSUFBbEIsd0JBQW9CLGVBQW1DO0FBQUksUUFBdkMsb0JBQWUsR0FBZixlQUFlLENBQW9CO0FBQUMsUUFNaEMsZUFBVSxHQUFXLEVBQUUsQ0FBQztBQUNsRCxRQVNFLFdBQVc7QUFDYixRQUFtQixRQUFHLEdBQVcsR0FBRyxDQUFDO0FBQ3JDLFFBRVUsV0FBTSxHQUFXLENBQUMsQ0FBQztBQUM3QixJQXJCNEQsQ0FBQztBQUM3RCxJQU9FLHNCQUFJLDhCQUFFO0FBQUksYUFJVjtBQUNDLFlBQUMsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ3BCLFFBQUUsQ0FBQztBQUVILGFBUkUsVUFBTyxLQUFhO0FBQ3RCLFlBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFDckIsWUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUMzQixRQUFFLENBQUM7QUFDRjtBQUNhO0FBSWIsT0FORTtBQUNILElBVUUsc0JBQUksaUNBQUs7QUFBSSxhQUFiO0FBQ0YsWUFBSSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDdkIsUUFBRSxDQUFDO0FBRUgsYUFBRSxVQUFVLEtBQUs7QUFDakIsWUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztBQUN4QixZ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RUU7QUFBYSxRQURaLEtBQUssQ0FBQyxXQUFXLENBQUM7QUFDckIsbURBRUc7QUFFSCxJQUVFO0FBQWEsUUFEWixXQUFXLENBQUMsYUFBYSxDQUFDO0FBQzdCLG9EQUVHO0FBRUgsSUFDRTtBQUFhLFFBRFosS0FBSyxDQUFDLFVBQVUsQ0FBQztBQUNwQixrREFFRztBQUVILElBRUU7QUFBYSxRQURaLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQztBQUNwQywwREFFRztBQUVILElBRUU7QUFBYSxRQURaLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztBQUMxQix3REFFRztBQUVILElBRXlCO0FBQWEsUUFBbkMsS0FBSyxDQUFDLGNBQWMsQ0FBQztBQUFDLHFEQUFtQjtBQUMzQyxJQUNrQjtBQUFhLFFBQTdCLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFBQywrQ0FBYTtJQTVIbkIsY0FBYyx3QkFSMUIsU0FBUyxDQUFDLGNBQ1QsU0FBUyxFQUFFLENBQUMsa0JBQWtCLENBQUMsY0FDL0IsUUFBUSxFQUFFLGtCQUFrQjtXQUM1QixRQUFRLEVBQUU7aUJBR1QsVUFDRixDQUFDLFFBQ1c7QUFBYyxDQXlKMUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQ0Q7QUFBQyxJQURELHFCQUFDO0FBQ0EsQ0FEQSxBQXpKRCxJQXlKQztBQUNELFNBMUphLGNBQWM7QUFDMUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE2LTIwMjAgVk13YXJlLCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBUaGlzIHNvZnR3YXJlIGlzIHJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlLlxuICogVGhlIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbiBjYW4gYmUgZm91bmQgaW4gTElDRU5TRSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBwcm9qZWN0LlxuICovXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBIb3N0QmluZGluZyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNCb29sZWFuQXR0cmlidXRlU2V0IH0gZnJvbSAnLi4vLi4vdXRpbHMvY29tcG9uZW50L2lzLWJvb2xlYW4tYXR0cmlidXRlLXNldCc7XG5pbXBvcnQgeyBDbHJBcmlhTGl2ZVNlcnZpY2UsIENsckFyaWFMaXZlUG9saXRlbmVzcyB9IGZyb20gJy4uLy4uL3V0aWxzL2ExMXkvYXJpYS1saXZlLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgcHJvdmlkZXJzOiBbQ2xyQXJpYUxpdmVTZXJ2aWNlXSxcbiAgc2VsZWN0b3I6ICdjbHItcHJvZ3Jlc3MtYmFyJyxcbiAgdGVtcGxhdGU6IGBcbiAgICA8cHJvZ3Jlc3MgW2lkXT1cImlkXCIgW2F0dHIubWF4XT1cIm1heFwiIFthdHRyLnZhbHVlXT1cInZhbHVlXCIgW2F0dHIuZGF0YS1kaXNwbGF5dmFsXT1cImRpc3BsYXlWYWx1ZVwiPjwvcHJvZ3Jlc3M+XG4gICAgPHNwYW4gKm5nSWY9XCJkaXNwbGF5QXJpYUxpdmUoKVwiPnt7IGRpc3BsYXlWYWx1ZSB9fTwvc3Bhbj5cbiAgYCxcbn0pXG5leHBvcnQgY2xhc3MgQ2xyUHJvZ3Jlc3NCYXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFyaWFMaXZlU2VydmljZTogQ2xyQXJpYUxpdmVTZXJ2aWNlKSB7fVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgY29tcG9uZW50IElEXG4gICAqL1xuICBwcml2YXRlIF9JRDogc3RyaW5nO1xuICBASG9zdEJpbmRpbmcoJ2F0dHIuaWQnKSBleHRlcm5hbElkOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KClcbiAgc2V0IGlkKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9JRCA9IHZhbHVlO1xuICAgIHRoaXMuZXh0ZXJuYWxJZCA9IG51bGw7XG4gIH1cbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9JRDtcbiAgfVxuXG4gIC8vIFByb2dyZXNzXG4gIEBJbnB1dCgnY2xyTWF4JykgbWF4OiBudW1iZXIgPSAxMDA7XG4gIEBJbnB1dCgnY2xyRGlzcGxheXZhbCcpIGRpc3BsYXl2YWw6IHN0cmluZztcblxuICBwcml2YXRlIF92YWx1ZTogbnVtYmVyID0gMDtcbiAgQElucHV0KCdjbHJWYWx1ZScpXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cblxuICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmRpc3BsYXlBcmlhTGl2ZSgpKSB7XG4gICAgICB0aGlzLmFyaWFMaXZlU2VydmljZS5hbm5vdW5jZSh0aGlzLmRpc3BsYXlWYWx1ZSwgdGhpcy5hcmlhTGl2ZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3R5bGVzXG4gIEBIb3N0QmluZGluZygnY2xhc3MucHJvZ3Jlc3MnKVxuICBnZXQgcHJvZ3Jlc3NDbGFzcygpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2xhYmVsZWQ6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MubGFiZWxlZCcpXG4gIGdldCBsYWJlbGVkQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xhYmVsZWQ7XG4gIH1cblxuICBASW5wdXQoJ2NsckxhYmVsZWQnKVxuICBzZXQgY2xyTGFiZWxlZCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2xhYmVsZWQgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmFkZTogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5wcm9ncmVzcy1mYWRlJylcbiAgZ2V0IGZhZGVDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZmFkZTtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyRmFkZScpXG4gIHNldCBjbHJGYWRlKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fZmFkZSA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9sb29wOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmxvb3AnKVxuICBnZXQgbG9vcENsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9sb29wO1xuICB9XG5cbiAgQElucHV0KCdjbHJMb29wJylcbiAgc2V0IGNsckxvb3AodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9sb29wID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX3N1Y2Nlc3M6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3Muc3VjY2VzcycpXG4gIGdldCBzdWNjZXNzQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N1Y2Nlc3M7XG4gIH1cblxuICAvKiogQGRlcHJlY2F0ZWQgc2luY2UgMi4wLCByZW1vdmUgaW4gNC4wICovXG4gIEBJbnB1dCgnY2xyU3VjY2VzcycpXG4gIHNldCBjbHJTdWNjZXNzKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fc3VjY2VzcyA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9kYW5nZXI6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZGFuZ2VyJylcbiAgZ2V0IGRhbmdlckNsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9kYW5nZXI7XG4gIH1cblxuICAvKiogQGRlcHJlY2F0ZWQgc2luY2UgMi4wLCByZW1vdmUgaW4gNC4wICovXG4gIEBJbnB1dCgnY2xyRGFuZ2VyJylcbiAgc2V0IGNsckRhbmdlcih2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2RhbmdlciA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9mbGFzaDogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mbGFzaCcpXG4gIGdldCBmbGFzaENsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9mbGFzaDtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyRmxhc2gnKVxuICBzZXQgY2xyRmxhc2godmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9mbGFzaCA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9mbGFzaERhbmdlcjogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mbGFzaC1kYW5nZXInKVxuICBnZXQgZmxhc2hEYW5nZXJDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZmxhc2hEYW5nZXI7XG4gIH1cblxuICAvKiogQGRlcHJlY2F0ZWQgc2luY2UgMi4wLCByZW1vdmUgaW4gNC4wICovXG4gIEBJbnB1dCgnY2xyRmxhc2hEYW5nZXInKVxuICBzZXQgY2xyRmxhc2hEYW5nZXIodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9mbGFzaERhbmdlciA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICAvLyBBcmlhIExpdmVcbiAgLyoqIEBkZXByZWNhdGVkIHNpbmNlIDMuMCwgcmVtb3ZlIGluIDQuMCAqL1xuICBASW5wdXQoJ2NsckFzc2VydGl2ZScpIGFzc2VydGl2ZTogYm9vbGVhbjtcbiAgLyoqIEBkZXByZWNhdGVkIHNpbmNlIDMuMCwgcmVtb3ZlIGluIDQuMCAqL1xuICBASW5wdXQoJ2Nsck9mZicpIG9mZjogYm9vbGVhbjtcblxuICAvKipcbiAgICogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIHdpbGwgaGF2ZSBzb21ldGhpbmcgdGhhdCBpcyByZWFkYWJsZVxuICAgKiBmb3IgdGhlIHNjcmVlbiByZWFkZXJcbiAgICovXG4gIGdldCBkaXNwbGF5VmFsdWUoKSB7XG4gICAgaWYgKHRoaXMuZGlzcGxheXZhbCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheXZhbDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMudmFsdWV9JWA7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSBhcmlhLWxpdmUgb25seSB3aGVuIHRoZXJlIGlzIHZhbHVlIGFuZCBpdCdzIG5vdCAwIG9yIGVxdWFsIHRvIHRoZSBtYXggdmFsdWVcbiAgICovXG4gIGRpc3BsYXlBcmlhTGl2ZSgpIHtcbiAgICByZXR1cm4gKHRoaXMudmFsdWUgIT09IHVuZGVmaW5lZCB8fCB0aGlzLnZhbHVlICE9PSAwKSAmJiB0aGlzLnZhbHVlICE9PSB0aGlzLm1heDtcbiAgfVxuXG4gIGdldCBhcmlhTGl2ZSgpOiBDbHJBcmlhTGl2ZVBvbGl0ZW5lc3Mge1xuICAgIGlmIChpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodGhpcy5hc3NlcnRpdmUpKSB7XG4gICAgICByZXR1cm4gQ2xyQXJpYUxpdmVQb2xpdGVuZXNzLmFzc2VydGl2ZTtcbiAgICB9XG4gICAgaWYgKGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh0aGlzLm9mZikpIHtcbiAgICAgIHJldHVybiBDbHJBcmlhTGl2ZVBvbGl0ZW5lc3Mub2ZmO1xuICAgIH1cbiAgICByZXR1cm4gQ2xyQXJpYUxpdmVQb2xpdGVuZXNzLnBvbGl0ZTtcbiAgfVxufVxuIl19